# ===============================
# ① 実行環境のベースイメージ
# ===============================
# Java 17 を実行するための軽量JRE
# （JDKではなくJREなのがポイント：本番用）
FROM eclipse-temurin:17-jre

# ===============================
# ② 作業ディレクトリを作成
# ===============================
# コンテナ内の /app を作業場所にする
WORKDIR /app

# ===============================
# ③ Spring Boot の jar をコピー
# ===============================
# ローカルで mvn package した jar を
# コンテナ内にコピーする
COPY target/*.jar app.jar

# ===============================
# ④ Spring Boot が使うポート
# ===============================
# Render では必須ではないが、明示しておく
EXPOSE 8080

# ===============================
# ⑤ アプリ起動コマンド
# ===============================
# コンテナ起動時に Spring Boot を実行
CMD ["java", "-jar", "app.jar"]
